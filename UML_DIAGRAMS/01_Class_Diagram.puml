@startuml Class Diagram - Resumate System

' ============================================
' CLASS DIAGRAM - RESUMATE SYSTEM
' ============================================

package "Backend Models" {
  class User {
    -_id: ObjectId
    -email: String
    -password: String
    -role: String
    -createdAt: Date
    +matchPassword(enteredPassword): Boolean
    +save(): User
  }

  class CVHistory {
    -_id: ObjectId
    -user: ObjectId
    -originalCVText: String
    -jobDescription: String
    -optimizedCVText: String
    -cvHTML: String
    -createdAt: Date
    +save(): CVHistory
  }
}

package "Backend Services" {
  class OpenAIService {
    -openai: OpenAI
    +optimizeCV(cvText, jobDescription): String
    -cleanExplanatoryText(text): String
  }

  class CVParser {
    +parseCVText(text): Object
    +extractProfile(text): Object
    +extractExperience(text): Array
    +extractEducation(text): Array
    +extractSkills(text): Array
    +extractProjects(text): Array
  }

  class HTMLGeneratorService {
    +generateCVHTML(parsedData, template): String
    +prepareModernProfessionalData(data): Object
    +prepareCleanMinimalData(data): Object
    +prepareProfessionalClassicData(data): Object
    +formatDescription(description): String
  }

  class OCRService {
    +extractTextFromPDF(file): String
    +extractTextFromImage(file): String
    +extractTextFromWord(file): String
  }

  class TextCleaner {
    +cleanText(text): String
    +removeNoise(text): String
  }
}

package "Backend Controllers" {
  class AuthController {
    +register(req, res): Response
    +login(req, res): Response
    +getMe(req, res): Response
  }

  class CVController {
    +generateCV(req, res): Response
    +getHistory(req, res): Response
    +getCVById(req, res): Response
  }

  class UploadController {
    +extractText(req, res): Response
  }
}

package "Backend Middleware" {
  class AuthMiddleware {
    +protect(req, res, next): void
    +verifyToken(token): Object
  }

  class UploadMiddleware {
    +uploadFile(req, res, next): void
  }
}

package "Frontend Components" {
  class AuthContext {
    -user: User
    -token: String
    -loading: Boolean
    +login(email, password): Promise
    +register(email, password): Promise
    +logout(): void
  }

  class Dashboard {
    -stats: Object
    -loading: Boolean
    +fetchStats(): void
    +render(): JSX
  }

  class GenerateCV {
    -cvText: String
    -jobDescription: String
    -selectedTemplate: String
    -currentStep: Number
    +handleSubmit(): void
    +handleFileUpload(file): void
  }

  class History {
    -cvList: Array
    -filteredList: Array
    -searchQuery: String
    +fetchHistory(): void
    +filterAndSortCVs(): void
  }

  class LanguageSelector {
    -currentLanguage: String
    +changeLanguage(lng): void
  }
}

package "Frontend Services" {
  class APIService {
    +authService: AuthService
    +cvService: CVService
    +uploadService: UploadService
  }

  class AuthService {
    +login(email, password): Promise
    +register(email, password): Promise
    +getMe(): Promise
  }

  class CVService {
    +generate(cvText, jobDescription, template): Promise
    +getHistory(): Promise
    +getById(id): Promise
  }

  class UploadService {
    +extractText(file): Promise
  }
}

' Relationships
User ||--o{ CVHistory : "has many"
AuthController ..> User : uses
AuthController ..> AuthMiddleware : uses
CVController ..> CVHistory : uses
CVController ..> OpenAIService : uses
CVController ..> CVParser : uses
CVController ..> HTMLGeneratorService : uses
UploadController ..> OCRService : uses
OpenAIService ..> CVParser : uses
CVParser ..> HTMLGeneratorService : uses
HTMLGeneratorService ..> CVHistory : saves

AuthContext ..> AuthService : uses
Dashboard ..> CVService : uses
GenerateCV ..> CVService : uses
GenerateCV ..> UploadService : uses
History ..> CVService : uses

@enduml


